import{$ as T,B as A,Bb as U,Ca as $,Cb as L,E as I,Ea as G,Eb as Y,Fa as Q,Fb as Z,H as D,Ha as C,Hb as ee,Ia as B,J as k,Pa as M,Ra as q,Ua as R,Va as X,Wa as N,_ as o,a as s,aa as E,b as p,g as S,hb as W,ib as H,ja as b,jb as V,ka as w,la as c,lb as z,m as O,mb as J,pa as h,qa as g,qb as K,r as j,sa as f,ta as _,ua as x,za as l}from"./chunk-BFXX2XRG.js";var ne=n=>({"xng-breadcrumb-link-disabled":n}),re=(n,u,e,t,r,a)=>({$implicit:n,info:u,last:e,first:t,index:r,count:a});function ae(n,u){n&1&&x(0)}function ie(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(2).$implicit;o(),B(e.label)}}function se(n,u){if(n&1&&(h(0,"a",7),b(1,ae,1,0,"ng-container",8)(2,ie,2,1,"ng-container",9),g()),n&2){let e=l(),t=e.$implicit,r=e.last,a=e.first,i=e.index,d=e.count,m=l();c("ngClass",q(10,ne,t.disable))("routerLink",t.routeInterceptor?t.routeInterceptor(t.routeLink,t):t.routeLink)("queryParams",m.preserveQueryParams?t.queryParams:void 0)("fragment",m.preserveFragment?t.fragment:void 0)("target",m.anchorTarget?m.anchorTarget:"_self"),w("aria-disabled",t.disable)("tabIndex",t.disable?-1:0),o(),c("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(12,re,t.label,t.info,r,a,i,d)),o(),c("ngIf",!m.itemTemplate)}}function oe(n,u){n&1&&x(0)}function ce(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(2).$implicit;o(),B(e.label)}}function ue(n,u){if(n&1&&(h(0,"label",10),b(1,oe,1,0,"ng-container",8)(2,ce,2,1,"ng-container",9),g()),n&2){let e=l(),t=e.$implicit,r=e.last,a=e.first,i=e.index,d=e.count,m=l();o(),c("ngTemplateOutlet",m.itemTemplate)("ngTemplateOutletContext",R(3,re,t.label,t.info,r,a,i,d)),o(),c("ngIf",!m.itemTemplate)}}function me(n,u){n&1&&x(0)}function le(n,u){if(n&1&&(f(0),C(1),_()),n&2){let e=l(3);o(),B(e.separator)}}function de(n,u){if(n&1&&(h(0,"li",11),b(1,me,1,0,"ng-container",12)(2,le,2,1,"ng-container",9),g()),n&2){let e=l(2);o(),c("ngTemplateOutlet",e.separatorTemplate),o(),c("ngIf",!e.separatorTemplate)}}function pe(n,u){if(n&1&&(f(0),h(1,"li",3),b(2,se,3,19,"a",4)(3,ue,3,10,"label",5),g(),b(4,de,3,2,"li",6),_()),n&2){let e=u.last;o(2),c("ngIf",!e),o(),c("ngIf",e),o(),c("ngIf",!e)}}var be=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=k({type:n,selectors:[["","xngBreadcrumbItem",""]],standalone:!0})}}return n})(),y={PREFIX:":",REGEX_IDENTIFIER:"/:[^/]+",REGEX_REPLACER:"/[^/]+"},he="@",te=n=>!!n&&Object.keys(n).length>0,ge=(()=>{class n{constructor(e,t){this.activatedRoute=e,this.router=t,this.baseHref="/",this.dynamicBreadcrumbStore=[],this.currentBreadcrumbs=[],this.previousBreadcrumbs=[],this.breadcrumbs=new S([]),this.breadcrumbs$=this.breadcrumbs.asObservable(),this.detectRouteChanges()}detectRouteChanges(){this.setupBreadcrumbs(this.activatedRoute.snapshot),this.router.events.pipe(j(e=>e instanceof U)).subscribe(e=>{e.shouldActivate&&this.setupBreadcrumbs(e.state.root)})}setupBreadcrumbs(e){this.previousBreadcrumbs=this.currentBreadcrumbs;let t=this.getRootBreadcrumb();this.currentBreadcrumbs=t?[t]:[],this.prepareBreadcrumbList(e,this.baseHref)}getRootBreadcrumb(){let e=this.router.config.find(a=>a.path===""),t=this.extractObject(e?.data?.breadcrumb),r=this.getFromStore(t.alias,"/");if(te(t)||te(r))return s(p(s(s({},r),t),{routeLink:this.baseHref}),this.getQueryParamsFromPreviousList("/"))}prepareBreadcrumbItem(e,t){let{path:r,breadcrumb:a}=this.parseRouteData(e.routeConfig),i=this.resolvePathSegment(r,e),d=`${t}${i}`,m=this.getFromStore(a.alias,d),P=this.extractLabel(m?.label||a?.label,i),v=!1,F="";return P||(v=!0,F=i),s(p(s(s({},m),a),{label:v?F:P,routeLink:d,isAutoGeneratedLabel:v}),this.getQueryParamsFromPreviousList(d))}prepareBreadcrumbList(e,t){if(e.routeConfig?.path){let i=this.prepareBreadcrumbItem(e,t);if(this.currentBreadcrumbs.push(i),e.firstChild)return this.prepareBreadcrumbList(e.firstChild,i.routeLink+"/")}else if(e.firstChild)return this.prepareBreadcrumbList(e.firstChild,t);let r=this.currentBreadcrumbs[this.currentBreadcrumbs.length-1];this.setQueryParamsForActiveBreadcrumb(r,e);let a=this.currentBreadcrumbs.filter(i=>!i.skip);this.breadcrumbs.next(a)}getFromStore(e,t){return this.dynamicBreadcrumbStore.find(r=>e&&e===r.alias||t&&t===r.routeLink||this.matchRegex(t,r.routeRegex))}matchRegex(e,t){return e.match(new RegExp(t))?.[0]===e}resolvePathSegment(e,t){return e.includes(y.PREFIX)&&Object.entries(t.params).forEach(([r,a])=>{e=e.replace(`:${r}`,`${a}`)}),e}getQueryParamsFromPreviousList(e){let{queryParams:t,fragment:r}=this.previousBreadcrumbs.find(a=>a.routeLink===e)||{};return{queryParams:t,fragment:r}}setQueryParamsForActiveBreadcrumb(e,t){if(e){let{queryParams:r,fragment:a}=t;e.queryParams=r?s({},r):void 0,e.fragment=a}}parseRouteData(e){let{path:t,data:r}=e,a=this.mergeWithBaseChildData(e,r?.breadcrumb);return{path:t,breadcrumb:a}}mergeWithBaseChildData(e,t){if(!e)return this.extractObject(t);let r;e.loadChildren?r=e._loadedRoutes.find(i=>i.path===""):e.children&&(r=e.children.find(i=>i.path===""));let a=r?.data?.breadcrumb;return a?this.mergeWithBaseChildData(r,s(s({},this.extractObject(t)),this.extractObject(a))):this.extractObject(t)}set(e,t){let r=this.extractObject(t),a;e.startsWith(he)?a=["alias",p(s({},r),{alias:e.slice(1)})]:e.includes(y.PREFIX)?a=["routeRegex",p(s({},r),{routeRegex:this.buildRegex(e)})]:a=["routeLink",p(s({},r),{routeLink:this.ensureLeadingSlash(e)})],a[1].isAutoGeneratedLabel=!1,this.updateStore(...a),this.updateCurrentBreadcrumbs(...a)}updateStore(e,t){let r=this.dynamicBreadcrumbStore.findIndex(a=>t[e]===a[e]);r>-1?this.dynamicBreadcrumbStore[r]=s(s({},this.dynamicBreadcrumbStore[r]),t):this.dynamicBreadcrumbStore.push(s({},t))}updateCurrentBreadcrumbs(e,t){let r=this.currentBreadcrumbs.findIndex(a=>e==="routeRegex"?this.matchRegex(a.routeLink,t[e]):t[e]===a[e]);if(r>-1){this.currentBreadcrumbs[r]=s(s({},this.currentBreadcrumbs[r]),t);let a=this.currentBreadcrumbs.filter(i=>!i.skip);this.breadcrumbs.next([...a])}}buildRegex(e){return this.ensureLeadingSlash(e).replace(new RegExp(y.REGEX_IDENTIFIER,"g"),y.REGEX_REPLACER)}ensureLeadingSlash(e){return e.startsWith("/")?e:`/${e}`}extractLabel(e,t){let r=typeof e=="object"?e.label:e;return typeof r=="function"?r(t):r}extractObject(e){return e&&(typeof e=="string"||typeof e=="function")?{label:e}:e||{}}static{this.\u0275fac=function(t){return new(t||n)(I(L),I(Y))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Se=(()=>{class n{set separator(e){e instanceof E?(this.separatorTemplate=e,this._separator=void 0):(this.separatorTemplate=void 0,this._separator=e||"/")}get separator(){return this._separator}constructor(e,t){this.breadcrumbService=e,this._separator="/",this.autoGenerate=!0,this.preserveQueryParams=!0,this.preserveFragment=!0,this.class="",this.setupMessage="not set up yet",this.someParameterValue=null,t.params.subscribe(r=>{this.setupComponent(r.someParam)})}setupComponent(e){this.setupMessage="set up at "+new Date,this.someParameterValue=e}ngOnInit(){this.breadcrumbs$=this.breadcrumbService.breadcrumbs$.pipe(O(e=>e.filter(t=>this.autoGenerate?!0:!t.isAutoGeneratedLabel).map(t=>{let{routeInterceptor:r,routeLink:a}=t;return p(s({},t),{routeLink:r?.(a,t)||a})})))}static{this.\u0275fac=function(t){return new(t||n)(T(ge),T(L))}}static{this.\u0275cmp=D({type:n,selectors:[["xng-breadcrumb"]],contentQueries:function(t,r,a){if(t&1&&$(a,be,5,E),t&2){let i;G(i=Q())&&(r.itemTemplate=i.first)}},inputs:{autoGenerate:"autoGenerate",preserveQueryParams:"preserveQueryParams",preserveFragment:"preserveFragment",class:"class",anchorTarget:"anchorTarget",separator:"separator"},standalone:!0,features:[M],decls:4,vars:4,consts:[["aria-label","breadcrumb",1,"xng-breadcrumb-root",3,"ngClass"],[1,"xng-breadcrumb-list"],[4,"ngFor","ngForOf"],[1,"xng-breadcrumb-item"],["class","xng-breadcrumb-link","rel","noopener noreferrer",3,"ngClass","routerLink","queryParams","fragment","target",4,"ngIf"],["class","xng-breadcrumb-trail",4,"ngIf"],["class","xng-breadcrumb-separator","aria-hidden","true",4,"ngIf"],["rel","noopener noreferrer",1,"xng-breadcrumb-link",3,"ngClass","routerLink","queryParams","fragment","target"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[1,"xng-breadcrumb-trail"],["aria-hidden","true",1,"xng-breadcrumb-separator"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&(h(0,"nav",0)(1,"ol",1),b(2,pe,5,3,"ng-container",2),X(3,"async"),g()()),t&2&&(c("ngClass",r.class),o(2),c("ngForOf",N(3,2,r.breadcrumbs$)))},dependencies:[K,W,H,V,z,J,ee,Z],styles:[`.xng-breadcrumb-root{margin:0}.xng-breadcrumb-list{display:flex;align-items:center;flex-wrap:wrap;margin:0;padding:0}.xng-breadcrumb-item{list-style:none}.xng-breadcrumb-trail{display:flex;align-items:center}.xng-breadcrumb-link{display:flex;align-items:center;white-space:nowrap;color:inherit;text-decoration:none;transition:text-decoration .3s;cursor:pointer}.xng-breadcrumb-link:hover{text-decoration:underline}.xng-breadcrumb-link-disabled{pointer-events:none;cursor:disabled}.xng-breadcrumb-separator{display:flex;-webkit-user-select:none;user-select:none;margin-left:8px;margin-right:8px}
`],encapsulation:2})}}return n})();export{ge as a,Se as b};
