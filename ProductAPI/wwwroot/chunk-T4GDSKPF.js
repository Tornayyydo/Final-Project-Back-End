import{a as N}from"./chunk-ZUQ7TKCG.js";import{a as b}from"./chunk-T56IFQX4.js";import{N as k,e as m,g as y,h as C,i as B,j as A,l as F,m as S,o as h,r as P}from"./chunk-SZOBYU5N.js";import{$ as s,C as c,Cb as U,Eb as v,H as u,Ha as l,Hb as _,I as d,Ja as D,_ as r,ib as L,ja as I,jb as V,k as E,la as o,m as j,p as G,pa as a,qa as p,qb as q,ra as f,w as O,ya as g,za as T}from"./chunk-BFXX2XRG.js";var R=class i{constructor(t,e,n){this.accountService=t;this.router=e;this.activatedRoute=n}loginForm;returnUrl;ngOnInit(){this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm()}createLoginForm(){this.loginForm=new B({email:new A("",[m.required,m.pattern("^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w]{2,3}$")]),password:new A("",m.required)})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},t=>{console.log(t)})}static \u0275fac=function(e){return new(e||i)(s(b),s(v),s(U))};static \u0275cmp=u({type:i,selectors:[["app-login"]],decls:9,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal","text-center"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return n.onSubmit()}),a(3,"h1",3),l(4,"Login"),p(),f(5,"app-text-input",4)(6,"app-text-input",5),a(7,"button",6),l(8,"Sign in"),p()()()()),e&2&&(r(2),o("formGroup",n.loginForm),r(3),o("label","Email Address"),r(),o("label","Password")("type","password"),r(),o("disabled",n.loginForm.invalid))},dependencies:[F,y,C,S,h,N]})};function X(i,t){if(i&1&&(a(0,"li"),l(1),p()),i&2){let e=t.$implicit;r(),D(" ",e," ")}}function Y(i,t){if(i&1&&(a(0,"ul",9),I(1,X,2,1,"li",10),p()),i&2){let e=T();r(),o("ngForOf",e.errors)}}var w=class i{constructor(t,e,n){this.fb=t;this.accountService=e;this.router=n}registerForm;errors;ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[m.required]],email:[null,{validators:[m.required,m.pattern("^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w]{2,3}$")],asyncValidators:[this.validateEmailNotTaken()],updateOn:"change"}],password:[null,[m.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe(t=>{this.router.navigateByUrl("/shop")},t=>{console.log(t),this.errors=t.errors})}validateEmailNotTaken(){return t=>G(500).pipe(O(()=>t.value?this.accountService.checkEmailExists(t.value).pipe(j(e=>e?{emailExists:!0}:null)):E(null)))}static \u0275fac=function(e){return new(e||i)(s(P),s(b),s(v))};static \u0275cmp=u({type:i,selectors:[["app-register"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","align-items-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal","text-center"],["formControlName","displayName",3,"label"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return n.onSubmit()}),a(3,"h1",3),l(4,"Register"),p(),f(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6),I(8,Y,2,1,"ul",7),a(9,"button",8),l(10,"Register"),p()()()()),e&2&&(r(2),o("formGroup",n.registerForm),r(3),o("label","Display Name"),r(),o("label","Email Address"),r(),o("label","Password")("type","password"),r(),o("ngIf",n.errors),r(),o("disabled",n.registerForm.invalid))},dependencies:[L,V,F,y,C,S,h,N]})};var Z=[{path:"login",component:R},{path:"register",component:w}],x=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=d({type:i});static \u0275inj=c({imports:[_.forChild(Z),_]})};var $=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=d({type:i});static \u0275inj=c({imports:[q,x,k]})};export{$ as AccountModule};
